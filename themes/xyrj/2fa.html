<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="initial-scale= 0,user-scalable=no,maximum-scale=1,width=device-width,viewport-fit=cover">
    <title>{{ &title }}</title>
	<meta name="keywords" content="{{ &title }}" />
   	<meta name="keywords" content="{{ &OPT.siteKeywords }}" />
    <meta name="description" content="{{ &OPT.siteDescription }}" />
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/fonts/fontawesome5pro-all.min.css'>
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/style.css'>
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/noto+serif.css' type='text/css' media='all' />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml">
	<link rel="shortcut icon" href="{{& OPT.theme_github_path}}xyrj/files/xyrj.png" type="image/x-icon">
	{{& OPT.codeBeforHead}}
    <style>
		.xyrj-main-layout {
			display: flex;
		    flex-direction: row;
		    flex-wrap: nowrap;
		    align-items: stretch;
		}

		.xyrj-left {
			flex: 0 0 16.666667%;
        	max-width: 16.666667%;
		}
		
		.xyojbk-content {
			padding: 2rem;
		    background-color: #fff;
		    position: relative;
		    border-radius: 8px;
		    width: 90%;
		    padding-right: 35px;
		    padding-left: 35px;
		}
		
		.xyrj-nav {
			display: -ms-flexbox;
			display: flex;
			-ms-flex-wrap: wrap;
			flex-wrap: wrap;
			padding-left: 0;
			margin-bottom: 0;
			list-style: none;
		}

		.nav__item {
			display: block;
			height: 6.25rem;
			margin-bottom: 1rem;
			text-align: center;
			text-transform: uppercase;
			width: 100%;
		}

		.nav__item a {
			background-color: #F7F9FA;
			border-radius:  25rem;
			color: #5E6E80;
			font-size: 0.875rem;
			font-weight: 500;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100%;
			position: relative;
			text-decoration: none;
			transition: all 0s;
		}

		.nav__item [class^="icon-"] {
			display: block;
			font-size: 2.25rem;
			margin-top: 0.25rem;
			margin-bottom: 0.5rem;
		}

		.nav__item a.active {
			background-image: linear-gradient(to top, #0ba360 0%, #3cba92 100%);
			box-shadow: inset -0.25rem -0.25rem 0.3125rem rgba(0, 0, 0, 0.1), inset 0.25rem 0.25rem 0.3125rem rgba(255, 255, 255, 0.23);
			color: #fff;
		}

		.nav__item a:hover {
		  	color: #0ba360; /* 鼠标悬停时变绿色 */
		}

		.xyrj-right {
	        -ms-flex: 0 0 83.333333%;
	        flex: 0 0 83.333333%;
	        max-width: 83.333333%;
    	}

		.xyrjbox-content {
			background-color: #fff;
			border-radius: 8px;
			padding:  875rem;
			position: relative;
			transition: box-shadow .3s ease-in-out;
		}
        
        .xyrjbox-content::after {
            content: "";
            display: table;
            clear: both;
        }


		.title-2fa {
			position: relative;
			color: #3B4B5E;
			font-size:  5rem;
			font-family: "Poppins", sans-serif;
			font-weight: 600;
		}

		.class-2fa, hr {
			float: left;
			width: 100%;
		}

		hr {
		    margin-top: 1rem;
		    margin-bottom: 1rem;
		    border: 0;
		    border-top: 1px solid rgba(0, 0, 0, .1);
		}

		.div-2fa {
			margin-bottom: 0.65rem;
			font-size: 0.88rem;
		}

		.input-2fa {
			background-color: #F7F9FA;
			border: 0px;
			border-radius: 0.55rem;
			box-shadow: none;
			color: #5E6E80;
			padding: 0.875rem  375rem 0.8125rem;
			outline: none !important;
			position: relative;
			width: 100%;
			box-shadow: inset 0px 0px 1px 1px rgb(50 174 77);
			font-size: 0.88rem;
			font-weight: 600;
		}

		.btn-get {
			background-image: linear-gradient(142.17deg, #009688 6.66%, #00d708de 91.48%);
			box-shadow: inset -0.25rem -0.25rem 0.3125rem rgba(0, 0, 0, 0.1), inset 0.25rem 0.25rem 0.3125rem rgba(255, 255, 255, 0.23);
			border-radius: 0.35rem;
			border: 0;
			color: #fff;
			cursor: pointer;
			/*font-size: 1rem;*/
			font-weight: 600;
			padding: 0.50rem 0.88rem;
		}

		.div-2fa>span {
			margin-left: 0.55rem;
			font-weight: 600;
		}
		.message-class {
			font-weight: 300 !important;
		}

		.btn-qr {
			float: right;
			border: 0;
			background-image: linear-gradient(142.17deg, #009688 6.66%, #00d708de 91.48%);
			box-shadow: inset -0.25rem -0.25rem 0.3125rem rgba(0, 0, 0, 0.1), inset 0.25rem 0.25rem 0.3125rem rgba(255, 255, 255, 0.23);
			border-radius: 0.25rem;
			color: #fff;
			cursor: pointer;
			font-size: 0.8rem;
		    font-weight: 600;
		    padding: 0.30rem 0.80rem;
		}
		.btn-get:hover, .btn-qr:hover {
			background: none;
			color: #000;
			box-shadow: inset 0px 0px 1px 1px rgb(50 174 77);
		}

		.xyrj-footer {
			color: #8D99A6;
			font-size: 0.875rem;
			padding-top: 1rem;
			padding-bottom: 1rem;
			text-align: center;
		}
		
		.del_2fakeys {
			background-image: linear-gradient(142.17deg, #ff6767 6.66%, #ae4c1ade 91.48%) !important;
		}
		.del_2fakeys:hover {
			box-shadow: inset 0px 0px 1px 1px rgb(249 78 78);
			background-image: none !important;
			color: red;
		}
		
		button:not(:disabled) {
			cursor: pointer;
		}
		textarea {
		    background-color: #F7F9FA;
		    border: 0px;
		    border-radius: 0.55rem;
		    padding: 2px 4px;
		    box-shadow: none;
		    color: #5E6E80;
		    width: 100%;
		    height: 120px !important;
		    box-shadow: inset 0px 0px 1px 1px rgb(50 174 77);
			outline: none !important;
		}
		textarea {
		    overflow: auto;
		    resize: vertical;
		}
		
		button, input, optgroup, select, textarea {
		    margin: 0;
		    font-family: inherit;
		    font-size: inherit;
		    line-height: inherit;
		}
		* {
		    word-break: break-all;
		}
		*, ::before, ::after {
		    background-repeat: no-repeat;
		    box-sizing: border-box;
		}
		#notification-container { position: fixed; top: 20px; right: 20px; z-index: 9999;}
		.notification { background-color: #030303bf; color: #fff; padding: 15px; border-radius: 4px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3); opacity: 0; transform: translateX(100%); transition: opacity 0.5s, transform 0.5s;}
		.notification.show { opacity: 1; transform: translateX(0);}

        /* --- START: 原始新增样式 --- */
        .tool-panel {
            display: none;
            width: 100%;
            float: left;
        }
        .tool-panel.active {
            display: block;
        }
        .qr-settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            width: 100%;
            /* float: left; (不再需要，因为父级不是 float) */
            margin-top: 1rem;
        }
        .div-2fa select.input-2fa {
            height: calc( 5em +  75rem + 2px); 
            padding: 0.875rem  375rem 0.8125rem;
        }
        #qr-code-output {
            width: 276px;
            height: 276px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #F7F9FA;
        }
        .title-p, .placeholder-p {
            font-size: 1rem;
            color: #5E6E80;
            margin-top: 0.5rem;
            /*margin-bottom: 1rem;*/
            width: 100%;
            float: left;
        }
        /* --- END: 原始新增样式 --- */

        /* --- START: 布局修改 - QR 双列布局 --- */
        .qr-layout-wrapper::after {
            content: "";
            display: table;
            clear: both;
        }
        .qr-settings-column {
            float: left;
            width: 60%;
            padding-right: 20px;
            box-sizing: border-box;
        }
        .qr-display-column {
            float: right;
            width: 40%;
            padding-left: 20px;
            box-sizing: border-box;
        }
        /* 响应式：在小屏幕上堆叠 */
        @media (max-width: 992px) { /* 调整断点以匹配布局 */
            .qr-settings-column,
            .qr-display-column {
                float: none;
                width: 100%;
                padding-left: 0;
                padding-right: 0;
            }
            .qr-display-column {
                margin-top: 2rem; /* 堆叠时增加间距 */
            }
            #qr-code-output {
                width: 100%; /* 占满可用宽度 */
                max-width: 276px; /* 但最大不超过276px */
                margin-left: auto;
                margin-right: auto;
            }
        }
        /* --- END: 布局修改 --- */

        /* --- START: 文本工具按钮样式 --- */
        .text-tool-buttons {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            flex-wrap: wrap; /* 允许按钮换行 */
            gap: 10px; /* 按钮之间的间距 */
        }
        /* 继承 .btn-get 样式，但用于更小的按钮 */
        .btn-get-sm {
            background-image: linear-gradient(142.17deg, #009688 6.66%, #00d708de 91.48%);
            box-shadow: inset -0.25rem -0.25rem 0.3125rem rgba(0, 0, 0, 0.1), inset 0.25rem 0.25rem 0.3125rem rgba(255, 255, 255, 0.23);
            border-radius: 0.35rem;
            border: 0;
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            padding: 0.40rem 0.75rem; /* 稍微小一点的 padding */
            font-size: 0.88rem; /* 字体大小与 .div-2fa 一致 */
        }
        .btn-get-sm:hover {
			background: none;
			color: #000;
			box-shadow: inset 0px 0px 1px 1px rgb(50 174 77);
		}
        .del_2fakeys_sm {
            background-image: linear-gradient(142.17deg, #ff6767 6.66%, #ae4c1ade 91.48%) !important;
        }
        .del_2fakeys_sm:hover {
			box-shadow: inset 0px 0px 1px 1px rgb(249 78 78);
			background-image: none !important;
			color: red;
		}

        /* 自动复制设置的样式 */
        .div-2fa-flex {
            margin-bottom: 0.65rem;
			font-size: 0.88rem;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .div-2fa-flex label {
            font-weight: 600;
            margin: 0;
        }
        .div-2fa-flex select.input-2fa {
            width: auto; /* 自动宽度 */
            flex-grow: 1;
            min-width: 100px;
        }
        /* --- END: 文本工具按钮样式 --- */

        /* --- START: 为单选框添加新样式 --- */
        .radio-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .radio-group input[type="radio"] {
            /* 隐藏默认单选框 */
            appearance: none;
            -webkit-appearance: none;
            width:  15em; /* 调整大小 */
            height:  15em;
            border: 2px solid #5E6E80;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            top: 2px; /* 微调垂直对齐 */
        }
        .radio-group input[type="radio"]:checked {
            border-color: #0ba360;
            background-color: #fff;
        }
        /* 创建内部圆点 */
        .radio-group input[type="radio"]:checked::after {
            content: '';
            display: block;
            width: 0.65em; /* 圆点大小 */
            height: 0.65em;
            background-color: #0ba360;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .radio-group label {
            font-weight: normal !important; /* 覆盖父级 .div-2fa 的加粗 */
            margin: 0;
            padding-right: 10px;
            cursor: pointer;
        }
        /* --- END: 为单选框添加新样式 --- */

    </style>
    </head>
<body class="m-flex"> 
	<header class="site-header">
    <div class="header-container">
        <div class="mobile-menu-toggle" id="mobile-menu-toggle">
            <i class="fal fa-bars"></i>
        </div>
        <div class="header-left">
            <div class="logo-area">
                {{ #OPT.logo }}
                <a href="/"><img src="{{ &OPT.logo }}" alt="博客Logo" class="logo-image"></a>
                {{ /OPT.logo }}
                {{ #OPT.showSiteNameInHeader }}
                <a href="/" class="blog-name">{{ &OPT.siteName }}</a>
                {{ /OPT.showSiteNameInHeader }}
            </div>
            <nav class="main-nav" id="main-nav">
                <div class="close-menu-btn" id="close-menu-btn">&times;</div>

                <div class="mobile-nav-header">
                    <img src="{{ &OPT.theme_github_path }}xyrj/files/mobile-header.svg" alt="导航背景" class="mobile-nav-header-image">
                </div>

                <ul>
                    {{ #OPT.widgetMenuList }}
                    <li>
                        <a href="{{ &url }}">
                            {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                            {{ #hasChildren }}
                            <span class="arrow-container"><i class="fal fa-angle-down"></i></span>
                            {{ /hasChildren }}
                        </a>
                        {{ #hasChildren }}
                        <span class="submenu-toggle"><i class="fal fa-angle-right"></i></span>
                        {{ /hasChildren }}

                        {{ #hasChildren }}
                        <ul class="sub-menu">
                            {{ #children }}
                            <li>
                                <a href="{{ &url }}">
                                    {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                                    {{ #hasChildren }}
                                    <span class="arrow-container"><i class="fal fa-angle-right"></i></span>
                                    {{ /hasChildren }}
                                </a>
                                {{ #hasChildren }}
                                <span class="submenu-toggle"><i class="fal fa-angle-right"></i></span>
                                {{ /hasChildren }}

                                {{ #hasChildren }}
                                <ul class="sub-menu">
                                    {{ #children }}
                                    <li>
                                        <a href="{{ &url }}">
                                            {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                                        </a>
                                    </li>
                                    {{ /children }}
                                </ul>
                                {{ /hasChildren }}
                            </li>
                            {{ /children }}
                        </ul>
                        {{ /hasChildren }}
                    </li>
                    {{ /OPT.widgetMenuList }}
                     <li class="login-btn-mobile">
                        <a href="/admin">
                            <button class="login-btn-header">登录</button>
                        </a>
                    </li>
                </ul>
            </nav>
            </div>

        <div class="header-right">
            <div class="search-icon" id="search-toggle">
                <i class="fal fa-search"></i>
            </div>
             <a href="/admin" class="login-link">
                <i class="fal fa-user-circle"></i>
            </a>
        </div>
    </div>

	<div class="search-box-container" id="search-box">
        <input type="text" placeholder="输入关键词搜索..." class="search-input">
        <button class="search-button">搜索</button>
        <i class="far fa-chevron-double-up" id="close-search-btn" title="收起"></i>
    </div>
</header>
    <div id="wrap" class="container">
		<div class="xyrj-main-layout">
					<aside class="xyrj-left">
							<div class="xyojbk-content">
									<div class="sidebar-inner-wrapper">
											<ul class="xyrj-nav">
												<li class="nav__item"><a class="active" href="#" data-tool="2fa"><i class="fas fa-key-skeleton" style="display: block; font-size: 2.0rem; margin-top: 0.25rem; margin-bottom: 0.5rem;"></i>2FA工具</a></li>
												<li class="nav__item"><a href="#" data-tool="qr"><i class="far fa-qrcode" style="display: block; font-size: 2.0rem; margin-top: 0.25rem; margin-bottom: 0.5rem;"></i>生成二维码</a></li>
												<li class="nav__item"><a href="#" data-tool="text"><i class="fas fa-file-alt" style="display: block; font-size: 2.0rem; margin-top: 0.25rem; margin-bottom: 0.5rem;"></i>文本处理</a></li>
												<li class="nav__item"><a href="#" data-tool="datetime"><i class="fas fa-calendar-alt" style="display: block; font-size: 2.0rem; margin-top: 0.25rem; margin-bottom: 0.5rem;"></i>日期时间</a></li>
												<li class="nav__item"><a href="#" data-tool="more"><i class="fas fa-ellipsis-h" style="display: block; font-size: 2.0rem; margin-top: 0.25rem; margin-bottom: 0.5rem;"></i>更多工具</a></li>
											    </ul>
									</div>
							</div>		
					</aside>

					<div class="xyrj-right">
							<div class="xyrjbox-content">
                                <div id="tool-content-2fa" class="tool-panel active">
									<div class="xyrj-2fa">
										<h1 class="title-2fa">2FA验证</h1>
										<p class="title-p">双重验证码/二步验证码获取工具（相当于谷歌身份验证器的网页版），使用时输入密钥获取即可。</p>
									</div>
									<hr>
									<div class="class-2fa">
										<div class="div-2fa"><input id="secret-input-js" class="input-2fa" type="text" placeholder="点击此处输入密钥" autocomplete="on"></div>
										<div class="div-2fa"><button id="btn-js" class="btn-get">点击获取验证码</button><span class="message-class">JS实现</span></div>
										<div class="div-2fa" id="key-output-js">双重密钥为: <span id="key_js"></span></div>
										<div class="div-2fa" id="code-output-js">当前验证码: <span id="code_js" style="color: rgb(50, 174, 77);"></span></div>
										<div class="div-2fa">剩余的时间: <span id="timer_js"></span> 秒 <button class="btn-qr" id="btn-qr-js">生成二维码</button></div>
									</div>
									<hr>
									<div class="class-2fa">
										<textarea id="2fa_keys" placeholder="这里记录了获取过验证码的2FA密钥，你也可以备注任何信息到此处，但是要注意本区域内容是保存在浏览器缓存中的，清除浏览器cookie或点击下方清除按钮将丢失内容，请谨慎操作并保存自己的数据信息！" style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 120px; outline: none; cursor: grab;"></textarea>
										<button class="btn-qr del_2fakeys" id="btn-del-keys">清除本地记录的2FA密钥</button>
									</div>
									<hr>
									<h3 class="title title--h5">2FA工具说明</h3>
									<p class="tip-p"><strong>新手提示</strong>：必须在倒计时结束前输入验证码登录或验证，否则会失效显示错误。测试功能时必须输入正确编码的密钥，不要随便输入1串字符测试获取功能。目前点击获取验证码的按钮后会自动复制验证码到剪切板，直接去粘贴即可。如果想要验证生成的验证码是否正确，点击生成二维码的按钮，使用谷歌验证器APP扫描添加检查。<br><strong>更多方式</strong>：还可以将密钥加在网址后面，示例：，这样访问也可查询验证码。这样的格式发给新手使用，最合适不过。
										<br><strong>最近维护</strong>：2025年10月22日
									</p>
                                </div>
                                <div id="tool-content-qr" class="tool-panel">
                                    <div class="xyrj-2fa">
                                        <h1 class="title-2fa">生成二维码</h1>
                                        <p class="title-p">输入文本或URL，点击按钮即可在下方生成对应的QR码。</p>
                                    </div>
                                    <hr>

                                    <div class="qr-layout-wrapper">
                                        
                                        <div class="qr-settings-column">
                                            <div class="div-2fa">
                                                <label for="qr-text-input" style="font-weight: 600; margin-bottom: 5px;">URL或其他文本:</label>
                                                <textarea id="qr-text-input" placeholder="输入URL或其他文本" style="height: 100px !important;"></textarea>
                                            </div>
                                            
                                            <h3 class="title title--h5" style="margin-top:  5rem;">二维码设置</h3>
                                            <div class="qr-settings-grid">
                                                <div class="div-2fa">
                                                    <label for="qr-output-format" style="font-weight: 600; margin-bottom: 5px;">输出格式:</label>
                                                    <select id="qr-output-format" class="input-2fa">
                                                        <option>SVG</option>
                                                        <option>PNG</option>
                                                        <option>JPG</option>
                                                    </select>
                                                </div>
                                                <div class="div-2fa">
                                                    <label for="qr-correct-level" style="font-weight: 600; margin-bottom: 5px;">纠错级别:</label>
                                                    <select id="qr-correct-level" class="input-2fa">
                                                        <option value="L">L (Low, 7%)</option>
                                                        <option value="M">M (Medium, 15%)</option>
                                                        <option value="Q">Q (Quartile, 25%)</option>
                                                        <option value="H" selected>H (High, 30%)</option>
                                                    </select>
                                                </div>
                                                <div class="div-2fa">
                                                    <label for="qr-type" style="font-weight: 600; margin-bottom: 5px;">类型:</label>
                                                    <select id="qr-type" class="input-2fa">
                                                        <option>Default</option>
                                                        <option>Swiss</option>
                                                    </select>
                                                </div>
                                                <div class="div-2fa">
                                                    <label for="qr-margin" style="font-weight: 600; margin-bottom: 5px;">边缘 (Margin):</label>
                                                    <input type="number" id="qr-margin" class="input-2fa" value="4">
                                                </div>
                                                <div class="div-2fa">
                                                    <label for="qr-cell-size" style="font-weight: 600; margin-bottom: 5px;">原胞大小:</label>
                                                    <input type="number" id="qr-cell-size" class="input-2fa" value="10">
                                                </div>
                                            </div>

                                            <div class="div-2fa" style="margin-top: 1rem;">
                                                <button id="generate-qr-btn" class="btn-get">生成QR码</button>
                                            </div>
                                        </div>

                                        <div class="qr-display-column">
                                            <h3 class="title title--h5" style="margin-top: 0;">QR码</h3>
                                            <div id="qr-code-output">
                                                </div>
                                        </div>

                                    </div>
                                    </div>
                                <div id="tool-content-text" class="tool-panel">
                                    <div class="xyrj-2fa">
                                        <h1 class="title-2fa">文本处理</h1>
                                        <p class="title-p">提供常用的文本处理功能，如大小写转换、去重、排序等。</p>
                                    </div>
                                    <hr>
                                    
                                    <div class="class-2fa">
                                        <label for="text-io" style="font-weight: 600; margin-bottom: 5px;">输入 / 输出:</label>
                                        <textarea id="text-io" placeholder="在此处粘贴或输入文本..." style="height: 300px !important;"></textarea>
                                    </div>
                                    <div class="class-2fa text-tool-buttons">
										<button id="text-btn-pinyin" class="btn-get-sm">汉字转拼音</button>
                                        <button id="text-btn-upper" class="btn-get-sm">全大写 AB</button>
                                        <button id="text-btn-lower" class="btn-get-sm">全小写 ab</button>
                                        <button id="text-btn-cap-words" class="btn-get-sm">首字母大写 Aa Bb</button>
                                        <button id="text-btn-lower-words" class="btn-get-sm">首字母小写 aA bB</button>
                                        <button id="text-btn-cap-sentence" class="btn-get-sm">句子首字母大写</button>
                                        <button id="text-btn-cap-title" class="btn-get-sm">标题大小写</button>
                                        <button id="text-btn-copy" class="btn-get-sm btn-qr del_2fakeys">复制</button>
                                        <button id="text-btn-cut" class="btn-get-sm btn-qr del_2fakeys">剪切</button>
                                        <button id="text-btn-clear" class="btn-get-sm btn-qr del_2fakeys">清空</button>
										<button id="text-btn-space-to-underscore" class="btn-get-sm">空格→下划线</button>
                                        <button id="text-btn-to-camel" class="btn-get-sm">下划线&空格→驼峰</button>
                                        <button id="text-btn-camel-to-underscore" class="btn-get-sm">驼峰→下划线</button>
                                        <button id="text-btn-camel-to-space" class="btn-get-sm">驼峰→空格</button>
                                        <button id="text-btn-space-to-hyphen" class="btn-get-sm">空格→中横线</button>
                                        <button id="text-btn-hyphen-to-underscore" class="btn-get-sm">中横线→下划线</button>
                                        <button id="text-btn-underscore-to-space" class="btn-get-sm">下划线→空格</button>
                                        <button id="text-btn-underscore-to-dot" class="btn-get-sm">下划线→小数点</button>
                                        <button id="text-btn-dot-to-underscore" class="btn-get-sm">小数点→下划线</button>
										<button id="text-btn-space-to-newline" class="btn-get-sm">空格→换行</button>
                                        <button id="text-btn-newline-to-space" class="btn-get-sm">换行→空格</button>
                                        <button id="text-btn-clear-lines" class="btn-get-sm">清除行号</button>
                                        <button id="text-btn-clear-space" class="btn-get-sm">清除空格</button>
                                        <button id="text-btn-clear-newline" class="btn-get-sm">清除换行</button>
                                    </div>
                                    <div class="class-2fa" style="margin-top: 1rem;">
                                        <div class="div-2fa-flex">
                                            <label>转换后自动复制结果:</label>
                                            <div class="radio-group">
                                                <input type="radio" id="auto-copy-no" name="auto-copy" value="no" checked>
                                                <label for="auto-copy-no">否</label>
                                                <input type="radio" id="auto-copy-yes" name="auto-copy" value="yes">
                                                <label for="auto-copy-yes">是</label>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <h3 class="title title--h5">提示</h3>
									<p class="tip-p">
                                        <strong>首字母大写</strong>: 仅在英文单词有空格的情况下才有效。<br>
                                        <strong>句子首字母大写</strong>: 仅在". "后的第一个单词有效。<br>
                                        <strong>"标题大小写"</strong>: 目前的全大写单词有过滤比较少、 大家可以反馈提交。
                                    </p>
                                </div>
                                <div id="tool-content-datetime" class="tool-panel">
                                    <div class="xyrj-2fa">
                                        <h1 class="title-2fa">日期时间</h1>
                                        <p class="placeholder-p" style="font-size:  2rem; text-align: center; margin-top: 3rem;">
                                            <i class="fas fa-clock" style="margin-right: 10px;"></i>功能开发中...
                                        </p>
                                    </div>
                                </div>
                                <div id="tool-content-more" class="tool-panel">
                                    <div class="xyrj-2fa">
                                        <h1 class="title-2fa">更多工具</h1>
                                        <p class="placeholder-p" style="font-size:  2rem; text-align: center; margin-top: 3rem;">
                                            <i class="fas fa-tools" style="margin-right: 10px;"></i>功能开发中...
                                        </p>
                                    </div>
                                </div>
                                </div>
							<div  class="xyrj-footer">©2025 在线工具</div>
				</div>			
		</div>
        <div class="friend-links">
             <h3 class="widget-title">友情链接</h3>
             <div class="links-container">
                {{#widgetLinkList}}
                <div class="link-item">
                    {{#img}}
                        <a href="{{url}}" target="_blank" title="{{name}}">
                            <img src="{{img}}" alt="{{name}}">
                        </a>
                    {{/img}}
                    {{^img}}
                        <a href="{{url}}" target="_blank">{{name}}</a>
                    {{/img}}
                </div>
                {{/widgetLinkList}}
            </div>
        </div>
    </div>
	
	<div id="notification-container" style="position: fixed; top: 80px; right: 20px; z-index: 9999;"></div>
    
    <div id="myModal" style="display: none; position: fixed; z-index: 9998; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
      <div class="modal-content" style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 300px; text-align: center; border-radius: 8px; position: relative;">
        <span class="close" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; position: absolute; top: 5px; right: 15px; cursor: pointer;">&times;</span>
        <div id="qrcode" style="width: 256px; height: 256px; margin: 20px auto;"></div>
		<p class="qr-text">可以使用Google Authenticator扫描上方二维码把密钥添加至手机。</p>
      </div>
    </div>

	<footer class="footer">
		<div class="container">
			<div class="footer-meta">
				<div class="footer-links">
					{{{ footer_links }}}
				</div>
				<p>{{{ site_footer_copyright }}}</p>
			</div>
			</div>
	</footer>

    <div class="action action-style-0 action-color-0 action-pos-0">
        <div class="action-item gotop j-top">
            <i class="fal fa-arrow-up action-item-icon"></i>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ &OPT.theme_github_path }}xyrj/tools/otpauth.umd.min.js"></script>
	<script src="{{ &OPT.theme_github_path }}xyrj/tools/qrcode.min.js"></script>
    <script src="{{ &OPT.theme_github_path }}xyrj/tools/pinyin-pro.js"></script>
    <script src="{{ &OPT.theme_github_path }}xyrj/files/sticky-sidebar.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const topButton = document.querySelector('.j-top');
            if(topButton) {
                topButton.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        });
    </script>
<script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchToggle = document.getElementById('search-toggle');
            const searchBox = document.getElementById('search-box');
            const closeSearchBtn = document.getElementById('close-search-btn');

            if (searchToggle && searchBox) {
                searchToggle.addEventListener('click', function(event) {
                    event.stopPropagation();
                    searchBox.classList.toggle('visible');
                });
                
                searchBox.addEventListener('click', function(event) {
                    event.stopPropagation();
                });
            }

            if (closeSearchBtn) {
                closeSearchBtn.addEventListener('click', function() {
                    searchBox.classList.remove('visible');
                });
            }
            
            document.addEventListener('click', function() {
                if (searchBox && searchBox.classList.contains('visible')) {
                    searchBox.classList.remove('visible');
                }
            });

            const menuToggle = document.getElementById('mobile-menu-toggle');
            const mainNav = document.getElementById('main-nav');
            const body = document.querySelector('body');
            const overlay = document.getElementById('overlay');
            const closeMenuBtn = document.getElementById('close-menu-btn');

            const openMenu = function() { body.classList.add('nav-open'); };
            const closeMenu = function() { body.classList.remove('nav-open'); };
            
            if (menuToggle) { menuToggle.addEventListener('click', function(event) { event.stopPropagation(); openMenu(); }); }
            if (overlay) { overlay.addEventListener('click', closeMenu); }
            if (closeMenuBtn) { closeMenuBtn.addEventListener('click', closeMenu); }
            mainNav.addEventListener('click', function(event){ event.stopPropagation(); });

            const submenuToggles = document.querySelectorAll('.main-nav .submenu-toggle');
            submenuToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const subMenu = this.nextElementSibling;
                    if (subMenu && subMenu.classList.contains('sub-menu')) {
                        subMenu.classList.toggle('open');
                    }
                });
            });
            
            // --- START: 在这里添加搜索按钮的 JS 逻辑 ---
            const searchButton = document.querySelector('.search-button');
            const searchInput = document.querySelector('.search-input');

            if(searchButton && searchInput) {
                const performSearch = () => {
                    const query = searchInput.value.trim();
                    if (query) {
                        // 重定向到搜索结果页 (这个 URL 稍后需要在 index_plus.js 中实现)
                        window.location.href = '/search/' + encodeURIComponent(query) + '/';
                    }
                };

                // 点击按钮时搜索
                searchButton.addEventListener('click', performSearch);

                // 在输入框按回车键时搜索
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
            // --- END: 搜索按钮的 JS 逻辑 ---
            // --- END: Cleaned Comment Logic ---
			// --- START: 2FA Verification Logic ---
        function showMessage(msg, isError = false) {
            const messageEl = document.getElementById('message-output');
            if (messageEl) {
                messageEl.textContent = msg;
                messageEl.className = isError ? 'verification-message error' : 'verification-message success';
            }
        }

        // 允许回车键提交
        function enterSubmit(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                verifyToken();
            }
        }

        async function verifyToken() {
            const tokenInput = document.getElementById('token-input');
            const token = tokenInput.value.trim();
            
            if (!token) {
                showMessage('Please enter a token.', true);
                return;
            }

            const button = document.getElementById('verify-button');
            button.disabled = true;
            button.textContent = 'Verifying...';

            try {
                // 假设你的 worker.js 中有一个 /admin/2fa-verify 路由用于验证
                // 你需要根据 worker.js 的实际设置修改这个 URL
                const response = await fetch('/admin/2fa-verify', { 
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ token: token })
                });

                const result = await response.json();

                if (response.ok && result.success) {
                    showMessage('Verification successful! Redirecting...', false);
                    // 验证成功后，worker 应该已经设置了最终的 auth cookie
                    // 我们重定向到 admin 页面
                    window.location.href = result.redirect || '/admin';
                } else {
                    throw new Error(result.message || 'Invalid token.');
                }

            } catch (err) {
                console.error('Verification error:', err);
                showMessage(err.message || 'Invalid token. Please try again.', true);
                button.disabled = false;
                button.textContent = 'Submit';
                tokenInput.value = ''; // 清空输入
            }
        }
        // --- END: 2FA Verification Logic ---
        });
    </script>
	<script>
        /**
         * 2FA 前端脚本（对齐服务器时间 + 精准倒计时 + 显示 29→0）
         * - 统一时间源：客户端时间 + serverOffsetMs（由 HEAD/Date 同步）
         * - 精确对齐每秒与每个 30s 边界（避免 setInterval 漂移）
         * - 数字显示：29..0；到边界生成新码后，显示数字立即回到 29
         */
        
        (function() {
          const MAX_REFRESH_COUNT = 3;
          const PERIOD = 30;
          const DIGITS = 6;
          const ALGO = 'SHA1';
          const STORAGE = window.localStorage;
        
          let refreshCount = 0;
          let serverOffsetMs = 0;
          let timerSecondHandle = null;
          let timerWindowHandle = null;
          let lastNotiAt = 0;
        
          function nowMs() { return Date.now() + serverOffsetMs; }
        
          async function syncServerClock() {
            try {
              const t0 = performance.now();
              const res = await fetch(location.href, { method: 'HEAD', cache: 'no-store' });
              const dateStr = res.headers.get('Date');
              if (!dateStr) return;
              const t1 = performance.now();
              const rtt = (t1 - t0);
              const serverEpoch = new Date(dateStr).getTime() + rtt / 2;
              serverOffsetMs = serverEpoch - Date.now();
            } catch (e) { /* 忽略 */ }
          }
        
          // 关键：把显示值做成 29..0；其余计算维持不变
          function getTickInfo(tsMs) {
            const sec = Math.floor(tsMs / 1000);
            const secondsIntoPeriod = sec % PERIOD;                   // 0..29
            const secondsLeftDisplay = (PERIOD - 1) - secondsIntoPeriod; // 29..0（仅用于显示）
            const nextSecondMs = (sec + 1) * 1000;
            const nextWindowBoundaryMs = (sec - secondsIntoPeriod + PERIOD) * 1000;
            return { sec, secondsIntoPeriod, secondsLeftDisplay, nextSecondMs, nextWindowBoundaryMs };
          }
        
          function generateTotp(secretBase32, tsMs) {
            const totp = new OTPAuth.TOTP({
              algorithm: ALGO, digits: DIGITS, period: PERIOD,
              secret: OTPAuth.Secret.fromBase32(secretBase32)
            });
            return totp.generate({ timestamp: tsMs });
          }
        
          function showNotification(message) {
            const now = Date.now();
            if (now - lastNotiAt < 300) return;
            lastNotiAt = now;
            const container = document.getElementById('notification-container');
            const n = document.createElement('div');
            n.className = 'notification';
            n.textContent = message;
            container.appendChild(n);
            void n.offsetWidth;
            n.classList.add('show');
            setTimeout(() => n.remove(), 2600);
          }
        
          async function copyText(str) {
            if (str === null || str === undefined || str === "") {
                showNotification("内容为空，无需复制。");
                return;
            }
            try {
              if (navigator.clipboard && window.isSecureContext) {
                await navigator.clipboard.writeText(str);
              } else {
                const input = document.createElement('input');
                input.value = str;
                document.body.appendChild(input);
                input.select();
                const ok = document.execCommand('copy');
                document.body.removeChild(input);
                if (!ok) throw new Error('execCommand copy failed');
              }
              showNotification("已复制到剪切板！");
            } catch {
              showNotification("无法自动复制，请手动操作！");
            }
          }
        
          function filterAndValidateSecret(raw) {
            if (!raw) return null;
            let secret = String(raw).replace(/\s+/g, '').toUpperCase();
            const pattern = /^[A-Z2-7]+$/;
            if (secret.length < 16) { showNotification("密钥太短，请重新输入。"); return null; }
            if (secret.length > 128) { showNotification("密钥过长，请重新输入。"); return null; }
            if (!pattern.test(secret)) { showNotification("非正确编码的密钥，请重新输入。"); return null; }
            return secret;
          }
        
          function prependKeyRecord(secret) {
            const d = new Date();
            const dateString = d.getFullYear() + "." + (d.getMonth() + 1) + "." + d.getDate();
            const newLine = dateString + " - " + secret;
            const $ta = $('#2fa_keys');
            const existing = $ta.val().trim();
            const merged = (newLine + (existing ? "\n" + existing : "")).split('\n');
            const unique = Array.from(new Set(merged));
            const finalText = unique.join('\n');
            $ta.val(finalText);
            STORAGE.setItem('keyAll', finalText);
          }
        
          // --- START: 修改 - 2FA 定时器控制 ---
          function scheduleSecondTick() {
            if (timerSecondHandle) clearTimeout(timerSecondHandle);
            const t = nowMs();
            const { nextSecondMs } = getTickInfo(t);
            const delay = Math.max(0, nextSecondMs - t);
            timerSecondHandle = setTimeout(onSecondTick, delay);
          }
        
          function scheduleWindowTick() {
            if (timerWindowHandle) clearTimeout(timerWindowHandle);
            const t = nowMs();
            const { nextWindowBoundaryMs } = getTickInfo(t);
            const delay = Math.max(0, nextWindowBoundaryMs - t);
            timerWindowHandle = setTimeout(onWindowBoundary, delay);
          }

          function stop2FATimers() {
            if (timerSecondHandle) clearTimeout(timerSecondHandle);
            if (timerWindowHandle) clearTimeout(timerWindowHandle);
            timerSecondHandle = null;
            timerWindowHandle = null;
          }

          function start2FATimers() {
              stop2FATimers(); // 先停止任何可能在运行的定时器
              const t = nowMs();
              const { secondsLeftDisplay } = getTickInfo(t);
              $('#timer').text(secondsLeftDisplay);
              $('#timer_js').text(secondsLeftDisplay);
              
              scheduleSecondTick();
              scheduleWindowTick();
          }
          // --- END: 修改 - 2FA 定时器控制 ---
        
          function onSecondTick() {
            const t = nowMs();
            const { secondsLeftDisplay } = getTickInfo(t);
            // 显示 29..0
            $('#timer').text(secondsLeftDisplay);
            $('#timer_js').text(secondsLeftDisplay);
            scheduleSecondTick();
          }
        
          function onWindowBoundary() {
            const t = nowMs();
        
            // 到边界：刷新验证码
            const s1 = filterAndValidateSecret($('#secret-input-js').val());
            const s2 = filterAndValidateSecret($('#secret-input').val()); // s2 相关的PHP逻辑已在原HTML中删除，但保留检查
        
            if (refreshCount < MAX_REFRESH_COUNT) {
              if (s1) updateJSCode(s1, t, { silent: true });
              else { $("#key_js").text(""); $("#code_js").text(""); }
        
              if (s2) { /* updatePHPCode(t, { silent: true }); */ } // 原PHP逻辑位置
              else { $("#key").text(""); $("#code").text(""); }
        
              if (s1 || s2) refreshCount++;
            } else {
              if (s1) { $("#code_js").text("已超时，需要重新点击按钮获取！").css("color", "red"); }
              if (s2) { $("#code").text("已超时，需要重新点击按钮获取！").css("color", "red"); }
            }
        
            // 关键：刚进入新窗口，显示数字立刻回到 29
            $('#timer').text(29);
            $('#timer_js').text(29);
        
            scheduleWindowTick();
          }
        
          function updateJSCode(secret, tsMs, opts = {}) {
            const code = generateTotp(secret, tsMs);
            $("#key_js").text(secret);
            $("#code_js").text(code).css("color", "rgb(50 174 77)");
            STORAGE.setItem("key01", secret);
            if (!opts.silent) showNotification("已成功获取验证码哦~");
            return code;
          }
        
          function generateQRCode(secretInput) {
            const lastSeven = secretInput.slice(-7);
            const label  = 'Handy tool';
            const issuer = '2fa.run|...' + lastSeven;
            const totp = new OTPAuth.TOTP({
              algorithm: ALGO, digits: DIGITS, period: PERIOD,
              secret: OTPAuth.Secret.fromBase32(secretInput),
              label, issuer
            });
            const uri = totp.toString();
            const qrContainer = document.getElementById('qrcode');
            while (qrContainer.firstChild) qrContainer.removeChild(qrContainer.firstChild);
            new QRCode(qrContainer, { text: uri });
          }
        
          function openQRFor(inputSelector) {
            let secret = $(inputSelector).val();
            if (!secret) return showNotification("密钥未填写！");
            secret = filterAndValidateSecret(secret);
            if (!secret) return;
            generateQRCode(secret);
            document.getElementById("myModal").style.display = "block";
          }
        
          $(document).ready(async function() {
            $("input, textarea").prop('disabled', true);
        
            $("#secret-input-js").val(STORAGE.getItem("key01") || "");
            $("#2fa_keys").val(STORAGE.getItem("keyAll") || "");
        
            await syncServerClock();
        
            setTimeout(() => { $("input, textarea").prop('disabled', false); }, 300);
        
            // --- START: 修改 - 调用启动函数 ---
            start2FATimers();
            // --- END: 修改 - 调用启动函数 ---
          
            // --- START: 导航切换逻辑 ---
            $('.xyrj-nav li a').on('click', function(e) {
                e.preventDefault();
                var $this = $(this);
                var tool = $this.data('tool');

                if ($this.hasClass('active') || !tool) {
                    return; 
                }

                $('.xyrj-nav li a').removeClass('active');
                $this.addClass('active');

                $('.tool-panel').removeClass('active').hide();
                $('#tool-content-' + tool).addClass('active').show();

                if (tool === '2fa') {
                    start2FATimers();
                } else {
                    stop2FATimers();
                }
            });
            // --- END: 导航切换逻辑 ---

            // --- START: QR 生成器按钮逻辑 ---
            $('#generate-qr-btn').on('click', function() {
                var text = $('#qr-text-input').val();
                if (!text) {
                    showNotification('请输入URL或其他文本');
                    return;
                }
                
                var level = $('#qr-correct-level').val();
                var correctionLevelMap = {
                    'L': QRCode.CorrectLevel.L,
                    'M': QRCode.CorrectLevel.M,
                    'Q': QRCode.CorrectLevel.Q,
                    'H': QRCode.CorrectLevel.H
                };

                var $output = $('#qr-code-output');
                $output.empty(); // 清空上一个
                
                try {
                    new QRCode(document.getElementById("qr-code-output"), {
                        text: text,
                        width: 256,
                        height: 256,
                        colorDark : "#000000",
                        colorLight : "#ffffff",
                        correctLevel : correctionLevelMap[level]
                    });
                } catch (e) {
                    showNotification('生成QR码失败: ' + e.message);
                }
            });
            // --- END: QR 生成器按钮逻辑 ---
            
            // --- START: 文本处理工具逻辑 (已修改) ---
            const $textIO = $('#text-io');

            // 自动复制包装器
            function processText(newText) {
                $textIO.val(newText);
                if ($('input[name="auto-copy"]:checked').val() === 'yes') {
                    copyText(newText);
                }
            }

            //   大小写
            $('#text-btn-upper').on('click', () => processText($textIO.val().toUpperCase()));
            $('#text-btn-lower').on('click', () => processText($textIO.val().toLowerCase()));
            $('#text-btn-cap-words').on('click', () => {
                processText($textIO.val().toLowerCase().replace(/\b\w/g, char => char.toUpperCase()));
            });
            $('#text-btn-lower-words').on('click', () => {
                 processText($textIO.val().replace(/\b\w/g, char => char.toLowerCase()));
            });
            $('#text-btn-cap-sentence').on('click', () => {
                processText($textIO.val().toLowerCase().replace(/(^\w|\. \w)/g, char => char.toUpperCase()));
            });
            
            // 标题格
            const smallWords = /^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|v|via|vs)$/i;
            $('#text-btn-cap-title').on('click', () => {
                let text = $textIO.val().toLowerCase();
                text = text.replace(/\b\w+/g, (word, index) => {
                    if (index === 0 || !smallWords.test(word)) {
                        return word.charAt(0).toUpperCase() + word.slice(1);
                    }
                    return word;
                });
                processText(text);
            });

            // 2. 编辑
            $('#text-btn-pinyin').on('click', () => {
                if (typeof pinyinPro === 'undefined') {
                    showNotification("错误：pinyin-pro.js 库未加载！");
                    return;
                }
                const text = $textIO.val();
                try {
                    // 使用 pinyin-pro，不带声调，分隔
                    const pinyinResult = pinyinPro.pinyin(text, { toneType: 'none', type: 'string' });
                    processText(pinyinResult);
                } catch (e) {
                    showNotification("拼音转换失败: " + e.message);
                }
            });
            $('#text-btn-copy').on('click', () => copyText($textIO.val()));
            $('#text-btn-cut').on('click', () => {
                copyText($textIO.val());
                $textIO.val('');
            });
            $('#text-btn-clear').on('click', () => {
                $textIO.val('');
            });

            // 3. 替换
            $('#text-btn-space-to-underscore').on('click', () => processText($textIO.val().replace(/ /g, '_')));
            $('#text-btn-to-camel').on('click', () => {
                processText($textIO.val().toLowerCase().replace(/[\s_]+(\w)/g, (match, char) => char.toUpperCase()));
            });
            $('#text-btn-camel-to-underscore').on('click', () => {
                processText($textIO.val().replace(/([A-Z])/g, '_$1').toLowerCase());
            });
            $('#text-btn-camel-to-space').on('click', () => {
                processText($textIO.val().replace(/([A-Z])/g, ' $1').toLowerCase());
            });
            $('#text-btn-space-to-hyphen').on('click', () => processText($textIO.val().replace(/ /g, '-')));
            $('#text-btn-hyphen-to-underscore').on('click', () => processText($textIO.val().replace(/-/g, '_')));
            $('#text-btn-underscore-to-space').on('click', () => processText($textIO.val().replace(/_/g, ' ')));
            $('#text-btn-underscore-to-dot').on('click', () => processText($textIO.val().replace(/_/g, '.')));
            $('#text-btn-dot-to-underscore').on('click', () => processText($textIO.val().replace(/\./g, '_')));
            
            // 4. 行和空格
            $('#text-btn-space-to-newline').on('click', () => processText($textIO.val().replace(/ /g, '\n')));
            $('#text-btn-newline-to-space').on('click', () => processText($textIO.val().replace(/\n/g, ' ').replace(/\s+/g, ' ')));
            $('#text-btn-clear-lines').on('click', () => processText($textIO.val().replace(/^\s*\d+[\. \t]/gm, '')));
            $('#text-btn-clear-space').on('click', () => processText($textIO.val().replace(/[ \t]/g, '')));
            $('#text-btn-clear-newline').on('click', () => processText($textIO.val().replace(/\n/g, '')));
            // --- END: 文本处理工具逻辑 ---


          }); // $(document).ready 结束
        
          $(".input-2fa").on("click", function() {
            this.select();
            $(this).css("color", "red");
            if ($(this).val()) showNotification("已全选数据");
          });
        
          $("#btn-js").on("click", function() {
            let secret = $('#secret-input-js').val();
            secret = filterAndValidateSecret(secret);
            if (!secret) return;
            const code = updateJSCode(secret, nowMs());
            prependKeyRecord(secret);
            copyText(code);
            refreshCount = 0;
          });
		  // --- START: 新添加的事件绑定 ---
  
  	  // 绑定 "生成二维码" 按钮
  	  $("#btn-qr-js").on("click", function() {
  	  	  openQRFor('#secret-input-js');
  	  });
  
  	  // 绑定 "清除本地记录" 按钮
  	  $("#btn-del-keys").on("click", function() {
  	  	  if (confirm("确定要清除所有本地记录的2FA密钥吗？此操作不可恢复！")) {
  	  	  	  try {
     	  	  	  	  STORAGE.removeItem('keyAll'); 
     	  	  	  	  $('#2fa_keys').val('');
     	  	  	  	  showNotification("本地记录已清除。");
     	  	  	  } catch (e) {
     	  	  	  	  showNotification("清除失败！", true);
     	  	  	  }
     	  	  }
     	  }); 
     	  // --- END: 新添加的事件绑定 ---

		// --- START: Modal 关闭事件 ---    
     	  // 点击 'x' 按钮
     	  $('#myModal .close').on('click', function() {
     	  	  $('#myModal').css('display', 'none');
     	  });
  
       	  // 点击 Modal 外部区域
     	  $('#myModal').on('click', function(event) { 
     	  	  if (event.target == this) {
     	  	  	  $(this).css('display', 'none');
     	  	  }
     	  });
     	    
     	  // --- END: Modal 关闭事件 ---
        })(); // 正确关闭 IIFE
        
	</script>
</body>
</html>
