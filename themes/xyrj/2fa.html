<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width,viewport-fit=cover">
    <title>{{ &title }}</title>
	<meta name="keywords" content="{{ &title }}" />
   	<meta name="keywords" content="{{ &OPT.siteKeywords }}" />
    <meta name="description" content="{{ &OPT.siteDescription }}" />
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/fonts/fontawesome5pro-all.min.css'>
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/style.css'>
    <link rel='stylesheet' href='{{ &OPT.theme_github_path }}xyrj/files/noto+serif.css' type='text/css' media='all' />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml">
	<link rel="shortcut icon" href="{{& OPT.theme_github_path}}xyrj/files/xyrj.png" type="image/x-icon">
	{{& OPT.codeBeforHead}}
    <style>
        .breadcrumb a {
            color: #888; /* 设置面包屑导航中链接的颜色为灰色 */
        }
        .breadcrumb a:hover {
            color: #333; /* (可选) 设置鼠标悬停时链接的颜色为深灰色 */
        }

        /* --- START: New Comment Styles --- */
        .comment-form {
            margin-top: 20px;
        }
        .comment-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box; /* 确保 padding 不会撑大宽度 */
            min-height: 100px;
        }
        .comment-form .form-submit {
            margin-top: 10px;
        }
        .comment-form .submit {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .comment-form .submit:hover {
            background-color: #555;
        }
        .comment-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }
        .comment-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }
        .comment-item:last-child {
            border-bottom: none;
        }
        .comment-body p {
            margin: 0 0 10px;
        }
        .comment-meta {
            font-size: 12px;
            color: #888;
        }
        .comment-contact {
            margin-left: 10px;
            color: #555;
            font-style: italic;
        }
        
        /* --- START: Horizontal Form Row Styles --- */
        .comment-form p {
             margin: 10px 0;
        }
        .comment-form label {
            margin-right: 5px;
            font-size: 14px;
            color: #555;
            vertical-align: middle; /* 帮助标签与输入框对齐 */
        }

        .comment-form-bottom-row {
            display: flex;
            flex-wrap: wrap; /* 允许在小屏幕上换行 */
            align-items: center; /* 垂直居中对齐 */
            justify-content: flex-start; /* 从左侧开始排列 */
            margin-top: 10px;
        }
        /* 移除 flex 容器内 p 元素的默认上下边距，并添加右边距 */
        .comment-form-bottom-row p {
            margin: 5px 15px 5px 0; /* (上 右 下 左) 为元素之间添加右边距 */
        }
        .comment-form-bottom-row .form-submit {
            margin-right: 0; /* 最后一个元素不需要右边距 */
        }

        /* 统一下拉框、输入框和按钮的高度 */
        #contact-type,
        #contact-value,
        #captcha-input,
        .comment-form-bottom-row .submit {
            height: 36px; /* 统一高度 */
            padding-top: 5px;
            padding-bottom: 5px;
            box-sizing: border-box; /* 确保 padding 不会破坏高度 */
            vertical-align: middle;
        }
        
        #contact-type {
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        #contact-value {
            width: 130px; /* 给一个固定宽度 */
            margin-left: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        #captcha-input {
            width: 60px; /* 验证码输入框宽度 */
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .comment-form-bottom-row .submit {
            /* 调整 padding 以匹配新高度 */
            padding-left: 20px;
            padding-right: 20px;
        }
        /* --- END: Horizontal Form Row Styles --- */
    </style>
    </head>
<body class="m-flex"> 
	<header class="site-header">
    <div class="header-container">
        <div class="mobile-menu-toggle" id="mobile-menu-toggle">
            <i class="fal fa-bars"></i>
        </div>
        <div class="header-left">
            <div class="logo-area">
                {{ #OPT.logo }}
                <a href="/"><img src="{{ &OPT.logo }}" alt="博客Logo" class="logo-image"></a>
                {{ /OPT.logo }}
                {{ #OPT.showSiteNameInHeader }}
                <a href="/" class="blog-name">{{ &OPT.siteName }}</a>
                {{ /OPT.showSiteNameInHeader }}
            </div>
            <nav class="main-nav" id="main-nav">
                <div class="close-menu-btn" id="close-menu-btn">&times;</div>

                <div class="mobile-nav-header">
                    <img src="{{ &OPT.theme_github_path }}xyrj/files/mobile-header.svg" alt="导航背景" class="mobile-nav-header-image">
                </div>

                <ul>
                    {{ #OPT.widgetMenuList }}
                    <li>
                        <a href="{{ &url }}">
                            {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                            {{ #hasChildren }}
                            <span class="arrow-container"><i class="fal fa-angle-down"></i></span>
                            {{ /hasChildren }}
                        </a>
                        {{ #hasChildren }}
                        <span class="submenu-toggle"><i class="fal fa-angle-right"></i></span>
                        {{ /hasChildren }}

                        {{ #hasChildren }}
                        <ul class="sub-menu">
                            {{ #children }}
                            <li>
                                <a href="{{ &url }}">
                                    {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                                    {{ #hasChildren }}
                                    <span class="arrow-container"><i class="fal fa-angle-right"></i></span>
                                    {{ /hasChildren }}
                                </a>
                                {{ #hasChildren }}
                                <span class="submenu-toggle"><i class="fal fa-angle-right"></i></span>
                                {{ /hasChildren }}

                                {{ #hasChildren }}
                                <ul class="sub-menu">
                                    {{ #children }}
                                    <li>
                                        <a href="{{ &url }}">
                                            {{ #icon }}<i class="{{ &icon }}" style="margin-right: 5px;"></i> {{ /icon}}{{ &name }}
                                        </a>
                                    </li>
                                    {{ /children }}
                                </ul>
                                {{ /hasChildren }}
                            </li>
                            {{ /children }}
                        </ul>
                        {{ /hasChildren }}
                    </li>
                    {{ /OPT.widgetMenuList }}
                     <li class="login-btn-mobile">
                        <a href="/admin">
                            <button class="login-btn-header">登录</button>
                        </a>
                    </li>
                </ul>
            </nav>
            </div>

        <div class="header-right">
            <div class="search-icon" id="search-toggle">
                <i class="fal fa-search"></i>
            </div>
             <a href="/admin" class="login-link">
                <i class="fal fa-user-circle"></i>
            </a>
        </div>
    </div>

	<div class="search-box-container" id="search-box">
        <input type="text" placeholder="输入关键词搜索..." class="search-input">
        <button class="search-button">搜索</button>
        <i class="far fa-chevron-double-up" id="close-search-btn" title="收起"></i>
    </div>
</header>
    <div id="wrap" class="container">
		<div class="main-layout">
		<div class="row sticky-parent">
			<aside class="col-12 col-md-12 col-lg-2">
				<div class="sidebar box sticky-column" style="">
					<ul class="nav">
						<li class="nav__item"><a class="active" href="https://2fa.run"><i class="icon-key"></i>2FA工具</a></li>
						<li class="nav__item"><a href="note.html"><i class="icon-clipboard"></i>文本处理</a></li>
						<li class="nav__item"><a href="work.html"><i class="icon-instagram1"></i>图片处理</a></li>
						<li class="nav__item"><a href="money.html"><i class="icon-activity"></i>汇率换算</a></li>
						<li class="nav__item"><a href="more.html"><i class="icon-more-horizontal"></i>更多工具</a></li>
					</ul>
				</div>
			</aside>
			<div class="col-12 col-md-12 col-lg-10">
				<div class="box box-content">
					<div class="pb-0 pb-sm-2">
						<h1 class="title-2fa">2FA验证</h1>
						<p class="title-p">双重验证码/二步验证码获取工具（相当于谷歌身份验证器的网页版），使用时任选1种方式输入密钥获取即可。</p>
					</div>
					<hr>
					<div class="class-2fa">
						<div class="div-2fa"><input id="secret-input-js" class="input-2fa" type="text" placeholder="点击此处输入密钥" autocomplete="on"></div>
						<div class="div-2fa"><button id="btn-js" class="btn-get">点击获取验证码</button><span class="message-class">JS实现</span></div>
						<div class="div-2fa" id="key-output-js">双重密钥为: <span id="key_js"></span></div>
						<div class="div-2fa" id="code-output-js">当前验证码: <span id="code_js" style="color: rgb(50, 174, 77);"></span></div>
						<div class="div-2fa">剩余的时间: <span id="timer_js">13</span> 秒 <button class="btn-qr" onclick="showModalJS()">生成二维码</button></div>
					</div>
					<hr>
					
					
					
					
					<h3 class="title title--h5">2FA工具说明</h3>
					<p class="tip-p"><strong>新手提示</strong>：必须在倒计时结束前输入验证码登录或验证，否则会失效显示错误。测试功能时必须输入正确编码的密钥，不要随便输入1串字符测试获取功能。目前点击获取验证码的按钮后会自动复制验证码到剪切板，直接去粘贴即可。如果想要验证生成的验证码是否正确，点击生成二维码的按钮，使用谷歌验证器APP扫描添加检查。<br><strong>更多方式</strong>：还可以将密钥加在网址（https://2fa.run/2fa/）后面，示例：，这样访问也可查询验证码。这样的格式发给新手使用，最合适不过。
						<br><strong>最近维护</strong>：2023年10月22日
					</p>
				</div>
				<footer class="footer">©2025 在线工具</footer>
			</div>
		</div>
		</div>

	<script src="httpsax/2fa-cf.js"></script>
	<script src="httpsax/2fa-js.js"></script>
		</div>
        <div class="friend-links">
             <h3 class="widget-title">友情链接</h3>
             <div class="links-container">
                {{#widgetLinkList}}
                <div class="link-item">
                    {{#img}}
                        <a href="{{url}}" target="_blank" title="{{name}}">
                            <img src="{{img}}" alt="{{name}}">
                        </a>
                    {{/img}}
                    {{^img}}
                        <a href="{{url}}" target="_blank">{{name}}</a>
                    {{/img}}
                </div>
                {{/widgetLinkList}}
            </div>
        </div>
    </div>

	<footer class="footer">
		<div class="container">
			<div class="footer-meta">
				<div class="footer-links">
					{{{ footer_links }}}
				</div>
				<p>{{{ site_footer_copyright }}}</p>
			</div>
			</div>
	</footer>

    <div class="action action-style-0 action-color-0 action-pos-0">
        <div class="action-item gotop j-top">
            <i class="fal fa-arrow-up action-item-icon"></i>
        </div>
    </div>
    
    <div class="overlay" id="overlay"></div>
    
	<script src="{{ &OPT.theme_github_path }}xyrj/files/sticky-sidebar.min.js"></script>
	<script src="{{ &OPT.theme_github_path }}xyrj/files/fa-translations.js"></script>
	<script>
window.addEventListener('load', function() {
    const sidebarElement = document.querySelector('#desktop-sidebar-wrapper');
    
    if (window.innerWidth >= 992 && sidebarElement) {
        // Check if the sidebar is already initialized and destroy it before re-initializing
        if (this.state && this.state.desktopSidebar) {
            this.state.desktopSidebar.destroy();
        }

        // Initialize StickySidebar
        this.state = this.state || {}; // Ensure 'this.state' is defined
        this.state.desktopSidebar = new StickySidebar('#desktop-sidebar-wrapper', {
            topSpacing: 80,
            bottomSpacing: 20,
            containerSelector: '.main-layout',
            innerWrapperSelector: '.sidebar-inner-wrapper'
        });
    }
});
	</script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const topButton = document.querySelector('.j-top');
            if(topButton) {
                topButton.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        });
    </script>
<script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchToggle = document.getElementById('search-toggle');
            const searchBox = document.getElementById('search-box');
            const closeSearchBtn = document.getElementById('close-search-btn');

            if (searchToggle && searchBox) {
                searchToggle.addEventListener('click', function(event) {
                    event.stopPropagation();
                    searchBox.classList.toggle('visible');
                });
                
                searchBox.addEventListener('click', function(event) {
                    event.stopPropagation();
                });
            }

            if (closeSearchBtn) {
                closeSearchBtn.addEventListener('click', function() {
                    searchBox.classList.remove('visible');
                });
            }
            
            document.addEventListener('click', function() {
                if (searchBox && searchBox.classList.contains('visible')) {
                    searchBox.classList.remove('visible');
                }
            });

            const menuToggle = document.getElementById('mobile-menu-toggle');
            const mainNav = document.getElementById('main-nav');
            const body = document.querySelector('body');
            const overlay = document.getElementById('overlay');
            const closeMenuBtn = document.getElementById('close-menu-btn');

            const openMenu = function() { body.classList.add('nav-open'); };
            const closeMenu = function() { body.classList.remove('nav-open'); };
            
            if (menuToggle) { menuToggle.addEventListener('click', function(event) { event.stopPropagation(); openMenu(); }); }
            if (overlay) { overlay.addEventListener('click', closeMenu); }
            if (closeMenuBtn) { closeMenuBtn.addEventListener('click', closeMenu); }
            mainNav.addEventListener('click', function(event){ event.stopPropagation(); });

            const submenuToggles = document.querySelectorAll('.main-nav .submenu-toggle');
            submenuToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const subMenu = this.nextElementSibling;
                    if (subMenu && subMenu.classList.contains('sub-menu')) {
                        subMenu.classList.toggle('open');
                    }
                });
            });
            
            // --- START: Cleaned Comment Logic (Sidebar Only) ---

            // 1. 渲染侧边栏评论的函数
            function renderSidebarComments(comments) {
                // 1. 找到侧边栏的 ul 列表
                const sidebarList = document.getElementById('widget-recent-comments-list');
                if (!sidebarList) return; // 如果此页面没有侧边栏模块，则退出

                // 2. 清空 "正在加载..."
                sidebarList.innerHTML = '';

                // 3. 检查是否有评论
                if (!comments || comments.length === 0) {
                    sidebarList.innerHTML = '<li>暂无评论</li>';
                    return;
                }

                // 4. 只截取最新的 5 条评论
                const recentComments = comments.slice(0, 5);

                // 5. 遍历并生成 HTML
                recentComments.forEach(comment => {
                    const li = document.createElement('li');
                    li.style.borderBottom = '1px solid #eee'; 
                    li.style.padding = '10px 0';

                    // --- START: 新增跳转链接 ---
                    // 1. 创建 <a> 标签
                    const link = document.createElement('a');
                    
                    // 2. 构造 URL。
                    // comment.articleSlug 是文章ID
                    // comment.id 是评论的唯一ID
                    // article.html 中的评论列表项 <li> ID 格式为 "comment-..."
                    // 最终 URL: /article/ARTICLE_ID/#comment-COMMENT_ID
                    link.href = `/article/${comment.articleSlug}/#comment-${comment.id}`;

                    // 3. 添加样式，使其看起来像普通文本
                    link.style.textDecoration = 'none';
                    link.style.color = 'inherit'; // 继承父元素的颜色
                    link.style.display = 'block'; // 使其成为块级元素以便点击
                    // --- END: 新增跳转链接 ---

                    // --- 评论内容 ---
                    const contentP = document.createElement('p');
                    contentP.style.marginBottom = '5px';
                    contentP.textContent = comment.content;
                    
                    // --- 评论元信息 (联系方式) ---
                    const metaSpan = document.createElement('span');
                    metaSpan.style.fontSize = '12px';
                    metaSpan.style.color = '#888';

                    if (comment.contact && comment.contact.value) {
                        let typeLabel = '联系';
                        switch(comment.contact.type) {
                            case 'email': typeLabel = '邮箱'; break;
                            case 'QQ': typeLabel = 'QQ'; break;
                            case 'wechat': typeLabel = '微信'; break;
                            case 'telegram': typeLabel = 'Telegram'; break;
                        }
                        metaSpan.textContent = `[${typeLabel}: ${comment.contact.value}]`;
                    } else {
                        metaSpan.textContent = '[匿名]';
                    }

                    // --- 修改 Appending 逻辑 ---
                    // 将内容和元信息添加到 <a> 标签中
                    link.appendChild(contentP);
                    link.appendChild(metaSpan);
                    
                    // 将 <a> 标签添加到 <li> 中
                    li.appendChild(link);
                    
                    // 将 <li> 添加到列表中
                    sidebarList.appendChild(li);
                });
                
                // 移除最后一条评论的底部分隔线
                if(sidebarList.lastChild) {
                    sidebarList.lastChild.style.borderBottom = 'none';
                }
            }

            // 2. 获取评论的函数 (精简版)
            async function fetchComments() {
                try {
                    // 根据 index_plus.js，我们只能获取所有评论
                    const response = await fetch('/api/comments_all');
                    if (!response.ok) throw new Error('获取评论失败');
                    
                    const allComments = await response.json();
                    
                    // 仅渲染侧边栏
                    renderSidebarComments(allComments);

                } catch (error) {
                    console.error('获取评论时出错:', error);
                    
                    // 侧边栏也要显示失败
                    const sidebarList = document.getElementById('widget-recent-comments-list');
                    if (sidebarList) {
                        sidebarList.innerHTML = '<li>加载失败</li>';
                    }
                }
            }

            // 3. 页面加载时立即获取评论
            fetchComments();
            
            // --- START: 在这里添加搜索按钮的 JS 逻辑 ---
            const searchButton = document.querySelector('.search-button');
            const searchInput = document.querySelector('.search-input');

            if(searchButton && searchInput) {
                const performSearch = () => {
                    const query = searchInput.value.trim();
                    if (query) {
                        // 重定向到搜索结果页 (这个 URL 稍后需要在 index_plus.js 中实现)
                        window.location.href = '/search/' + encodeURIComponent(query) + '/';
                    }
                };

                // 点击按钮时搜索
                searchButton.addEventListener('click', performSearch);

                // 在输入框按回车键时搜索
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
            // --- END: 搜索按钮的 JS 逻辑 ---
            // --- END: Cleaned Comment Logic ---
        });
    </script>
	<div id="copy-notification">已复制!</div>
</body>
</html>
